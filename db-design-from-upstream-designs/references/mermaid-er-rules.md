# Mermaid ER図ルール

## 目的
DB設計書内のER図を、レビューしやすく一貫した形式で出力する。

## 記法ルール
- 図は `erDiagram` を使用する
- エンティティ名はテーブル物理名をベースに `UPPER_SNAKE_CASE` で統一する
- リレーションラベルは動詞で記述する（例: `has`, `belongs_to`, `contains`）
- 多重度は `||`, `|{`, `o{`, `o|` を正確に使い分ける

## カラム記載ルール
- 最低限、`PK` / `FK` / `UK` を明記する
- 型はDB種別に寄せる（例: `bigint`, `varchar`, `timestamp`）
- 監査列（`created_at`, `updated_at`）は原則含める

## レイアウトルール
- 中心テーブル（トランザクション）を先、マスタを後に配置する
- 関係線が交差しすぎる場合は業務ドメインごとに図を分割する
- 1図あたりの目安は 7〜12 テーブル

## 出力品質チェック
- すべてのFKがER図上の関係線として表現されている
- 多対多は中間テーブルで解消されている
- テーブル詳細とER図のカラム名・制約名が一致している
- 上流文書の主要業務ルールが関係として表現されている
