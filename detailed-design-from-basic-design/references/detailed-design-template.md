# 詳細設計書テンプレート

以下をプロジェクトに合わせて記入する。

---

# 詳細設計書: [プロジェクト名]

## 1. 文書情報

- 作成日: [YYYY-MM-DD]
- 作成者: [名前]
- 対象バージョン: [vX.Y.Z]
- 関連基本設計書: [ファイル名/リンク]

## 2. 設計対象と前提

- 対象機能: [対象機能一覧]
- 対象外: [今回含めない範囲]
- 前提条件: [認証方式、連携システム、運用制約]
- 用語定義: [必要な場合のみ]

## 3. トレーサビリティ

| 要件ID | 基本設計ID | 詳細設計ID | 対象セクション |
|---|---|---|---|
| R-xxx | SCR-xx/API-xx/DB-xx | DD-xxx | 4.x |

## 4. 機能別詳細設計

### 4.x [機能名]（詳細設計ID: DD-xxx）

#### 4.x.1 目的

[この処理の目的]

#### 4.x.2 入力

| 項目 | 型 | 必須 | 仕様 |
|---|---|---|---|
| [name] | [string/int/...] | [Y/N] | [桁数、範囲、形式、業務制約] |

#### 4.x.3 出力

| 項目 | 型 | 条件 | 仕様 |
|---|---|---|---|
| [name] | [string/int/...] | [成功/失敗時など] | [説明] |

#### 4.x.4 処理手順

1. [処理ステップ1]
2. [処理ステップ2]
3. [処理ステップ3]

#### 4.x.5 処理ロジック（擬似コード）

```text
IF [条件] THEN
  [処理]
ELSE
  [処理]
END IF
```

#### 4.x.6 例外・エラー処理

| ケース | 条件 | システム挙動 | 利用者向けメッセージ | ログ |
|---|---|---|---|---|
| 入力異常 | [条件] | [400/画面エラー表示等] | [メッセージ] | [出力内容] |

#### 4.x.7 データアクセス

| テーブル/リソース | 操作 | 条件 | 備考 |
|---|---|---|---|
| [table] | SELECT/INSERT/UPDATE/DELETE | [条件] | [索引、ロック、整合性] |

#### 4.x.8 トランザクション/排他

- トランザクション開始点: [処理]
- コミット条件: [条件]
- ロールバック条件: [条件]
- 排他方式: [楽観/悲観/不要]

#### 4.x.9 非機能対応

- 性能要件: [応答時間、件数上限]
- 可用性: [リトライ、タイムアウト、フォールバック]
- セキュリティ: [認可、マスキング、監査]
- 運用監視: [メトリクス、アラート条件]

#### 4.x.10 テスト観点

| 区分 | 観点 | 期待結果 |
|---|---|---|
| 正常系 | [観点] | [期待結果] |
| 準正常系 | [観点] | [期待結果] |
| 異常系 | [観点] | [期待結果] |

## 5. 共通仕様

### 5.1 ログ仕様

- ログレベル: [INFO/WARN/ERROR]
- 出力項目: [トレースID、ユーザーID、処理時間など]

### 5.2 エラーコード一覧

| コード | 意味 | HTTP/画面戻り値 | 対処 |
|---|---|---|---|
| E-xxx | [説明] | [値] | [対応] |

## 6. 変更履歴

| 日付 | 版 | 変更内容 | 変更理由 | 影響範囲 |
|---|---|---|---|---|
| [YYYY-MM-DD] | [v1.0] | [内容] | [理由] | [機能/API/DB/テスト] |

---

未確定事項は `[TBD]` で記載し、確認先と期限を併記する。
