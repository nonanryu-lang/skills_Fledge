# 基本設計→詳細設計マッピングガイド

## 目的

基本設計の情報を、実装・テスト可能な詳細設計要素へ分解する。

## マッピング表

| 基本設計の観点 | 詳細設計で必ず定義する項目 | 出力例 |
|---|---|---|
| 画面一覧・画面遷移 | 画面イベント、入力項目定義、バリデーション、エラー表示、遷移条件 | `DD-SCR-xx` |
| API一覧・IF定義 | エンドポイント単位の処理手順、入力検証、認可、例外、レスポンス生成 | `DD-API-xx` |
| データモデル | CRUD手順、トランザクション境界、排他制御、整合性ルール、監査項目 | `DD-DB-xx` |
| バッチ・ジョブ設計 | 起動条件、処理ステップ、再実行方針、失敗時リカバリ、通知 | `DD-BAT-xx` |
| 外部連携 | 連携シーケンス、タイムアウト、リトライ、フォールバック、監査ログ | `DD-EXT-xx` |
| 非機能要件 | 性能制約の処理上限、監視イベント、セキュリティ制御、運用手順 | `DD-NFR-xx` |

## 詳細化チェックポイント

1. **入力境界**: 必須/型/桁/範囲/フォーマット/業務ルールを定義する
2. **処理境界**: 正常系・準正常系・異常系の分岐を明示する
3. **データ境界**: 読み取り整合性・更新順序・ロールバック条件を明示する
4. **外部境界**: 外部失敗時の扱い（再試行/中断/代替）を定義する
5. **責務境界**: フロント/バックエンド/DB/外部システムの責務を分離する

## IDトレーサビリティ規則

- 基本設計IDを親として詳細設計IDを採番する
  - 例: `SCR-03` → `DD-SCR-03-01`, `DD-SCR-03-02`
  - 例: `API-02` → `DD-API-02-01`
- 1つの基本設計IDから複数詳細設計IDへ分割する場合、分割理由を記載する
- 詳細設計に新規項目を追加した場合、起点要件または設計判断を明示する

## 差分更新ルール

基本設計変更の種別ごとに次を実施する：

1. **追加**: 対応する詳細設計セクションを新規作成する
2. **変更**: 既存詳細設計の該当処理を更新し、影響範囲を明記する
3. **削除**: 不要化された詳細設計を廃止扱いにし、代替処理の有無を記載する

更新後は必ずテスト観点（正常系・異常系・境界値）を同時に更新する。
